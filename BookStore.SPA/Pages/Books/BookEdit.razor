@page "/bookedit"
@page "/bookedit/{BookId:int}"

<section class="book-edit text-center">

    <h1 class="page-title">@Title</h1>


    <EditForm Model="@Book" OnValidSubmit="@HandleValidSubmit">
        <DataAnnotationsValidator></DataAnnotationsValidator>

        <div class="form-group row justify-content-center">
            <label for="title" class="col-form-label col-sm-2">Titolo: </label>
            <div class="col-sm-8 col-md-5">
                <InputText id="title" class="form-control" @bind-Value="@Book.Title" placeholder="Titolo"></InputText>
                <ValidationMessage For="@(() => Book.Title)" />
            </div>
        </div>

        <div class="form-group row justify-content-center">
            <label for="description" class="col-form-label col-sm-2">Descrizione: </label>
            <div class="col-sm-8 col-md-5">
                <InputTextArea id="description" class="form-control" @bind-Value="@Book.Description" placeholder="Descrizione"></InputTextArea>
            </div>
        </div>

        <div class="form-group row justify-content-center">
            <label for="author" class="col-form-label col-sm-2">Autore: </label>
            <div class="col-sm-8 col-md-5">
                <InputText id="author" class="form-control" @bind-Value="@Book.Author" placeholder="Autore"></InputText>
                <ValidationMessage For="@(() => Book.Author)" />
            </div>
        </div>

        <div class="form-group row justify-content-center">
            <label for="categoryId" class="col-form-label col-sm-2">Categoria: </label>
            <div class="col-sm-8 col-md-5">
                <InputSelect id="categoryId" @bind-Value="@Book.CategoryId" class="form-select form-control" placeholder="Categoria">
                    <option selected disabled hidden value="0">Seleziona una categoria</option>
                    @foreach (var category in CategoryList)
                    {
                        <option value="@category.Id">@category.Name</option>
                    }
                </InputSelect>
                <ValidationMessage For="@(() => Book.CategoryId)" />
            </div>
        </div>

         <div class="col-sm-8 col-md-11">
            <br />
            <button type="submit" class="btn btn-success mr-2">Salva libro</button>
            <button class="btn btn-info" type="submit" @onclick="@NavigateToBooksPage">Annulla</button>
        </div>

        
    </EditForm>
</section>