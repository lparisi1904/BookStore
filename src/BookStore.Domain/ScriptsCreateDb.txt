CREATE DATABASE BookStore 


USE BookStore 


CREATE TABLE Book 
  ( 
     Id BIGINT IDENTITY (1,1), 
     Title       NVARCHAR(100) NOT NULL, 
     Author      NVARCHAR(50) NOT NULL,
     Description NVARCHAR(100) NOT NULL, 
	-- DateCreated Datetime Null,
     CategoryId  BIGINT NOT NULL, 
     PublisherId BIGINT NOT NULL, 
     PRIMARY KEY (Id), 
     FOREIGN KEY (CategoryId)  REFERENCES Category(Id), 
     FOREIGN KEY (PublisherId) REFERENCES Publisher(Id) 
  )



CREATE TABLE Author <-> BookAuthors : N:N
  ( 
     Id   BIGINT IDENTITY(1, 1) NOT NULL, 
     NAME NVARCHAR(50) NOT NULL, 
     PRIMARY KEY (Id) 
  ) 


CREATE TABLE Category <-> 1:N Book
  ( 
     Id   BIGINT IDENTITY(1, 1) NOT NULL, 
     NAME NVARCHAR(50) NOT NULL, 
     PRIMARY KEY (Id) 
  ) 



CREATE TABLE Publisher <-> Book : N:1
  ( 
     Id   BIGINT IDENTITY(1, 1) NOT NULL, 
     NAME NVARCHAR(100) NOT NULL, 
     PRIMARY KEY (Id) 
  ) 



---------------------------------------------
CREATE TABLE BookAuthors <-> 1:1 Book
  ( 
     BookId   BIGINT NOT NULL, 
     AuthorId BIGINT NOT NULL 
     PRIMARY KEY (BookId, AuthorId), 
     FOREIGN KEY (BookId) REFERENCES Book(Id), 
     FOREIGN KEY (AuthorId) REFERENCES Author(Id) 
  )


CREATE TABLE AuthorContact 
  ( 
     AuthorId      BIGINT NOT NULL, 
     ContactNumber NVARCHAR(15) NULL, 
     Address       NVARCHAR(100) NULL, 
     PRIMARY KEY (AuthorId), 
     FOREIGN KEY (AuthorId) REFERENCES Author(Id) 
  ) 